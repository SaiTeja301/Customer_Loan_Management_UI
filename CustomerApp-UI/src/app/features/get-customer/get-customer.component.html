<div class="min-h-screen bg-background">
    <!-- Header -->
    <header class="bg-surface shadow-surface border-b border-primary-100">
        <div class="px-6 py-4">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                <div>
                    <h1 class="text-2xl font-heading font-semibold text-text-primary">Customer Search</h1>
                    <p class="text-text-secondary mt-1">Search and view customer financial details and history</p>
                </div>
                <div class="ml-auto">
                    <table>
                        <tr>
                            <td class="px-6">
                                <div class="text-right">
                                    <p class="text-sm text-text-secondary">System Status</p>
                                    <p class="text-sm font-medium text-success-700">Online</p>
                                </div>
                            </td>
                            <td>
                                <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-search text-primary text-sm"></i>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </header>

    <!-- Content Area -->
    <div class="p-6">
        <!-- Success/Error Messages -->
        <div *ngIf="successMessage" class="success-message">
            <i class="fas fa-check-circle"></i>
            <span>{{ successMessage }}</span>
        </div>
        <div *ngIf="errorMessage" class="error-message">
            <i class="fas fa-exclamation-triangle"></i>
            <span>{{ errorMessage }}</span>
        </div>

        <!-- Search Section -->
        <section class="mb-8">
            <div class="card p-6 bg-white rounded-lg shadow-sm">
                <div class="flex items-center mb-4">
                    <i class="fas fa-search text-primary mr-3 text-xl"></i>
                    <h2 class="text-xl font-heading font-semibold text-text-primary">Search Customer</h2>
                </div>

                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <label for="customerId" class="block text-sm font-medium text-text-secondary mb-2">Customer
                            ID</label>
                        <input type="text" id="customerId" [(ngModel)]="customerId" (keyup.enter)="searchCustomer()"
                            placeholder="Enter customer ID (e.g., 7)" class="form-input w-full text-lg" pattern="[0-9]+"
                            title="Please enter a valid customer ID (numbers only)">
                        <p class="text-xs text-text-secondary mt-1">Enter a valid customer ID to retrieve financial
                            details</p>
                    </div>
                    <div class="flex justify-end items-end">
                        <button (click)="searchCustomer()" [disabled]="loading"
                            class="btn-primary flex items-center px-6 py-3 text-lg font-medium">
                            <i class="fas fa-search mr-2"></i>
                            <span>{{ loading ? 'Searching...' : 'Search' }}</span>
                            <i *ngIf="loading" class="fas fa-spinner fa-spin ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- Error Message (Local Search Error) -->
                <div *ngIf="error" class="mt-4 p-4 bg-error-100 border border-error-800 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-error-800 mr-2"></i>
                        <span class="text-error-800 font-medium">{{ error }}</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Loading State -->
        <section *ngIf="loading" class="card p-8 text-center mb-8">
            <div class="loading-skeleton w-16 h-16 rounded-full mx-auto mb-4"></div>
            <p class="text-text-secondary">Loading customer information...</p>
        </section>

        <!-- Customer Details Table -->
        <section *ngIf="customer && !loading">
            <div class="card bg-white rounded-lg shadow-sm overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="data-table w-full">
                        <thead class="bg-primary-25">
                            <tr>
                                <th class="px-2 py-3 text-left text-xs">
                                    <div class="flex items-center">
                                        <input type="checkbox" id="selectAll" class="form-checkbox"
                                            aria-label="Select all customers">
                                        <label for="selectAll" class="sr-only"></label>
                                    </div>
                                </th>
                                <th class="px-4 py-3 text-left text-xs">Customer ID</th>
                                <th class="px-4 py-3 text-left text-xs">Name</th>
                                <th class="px-4 py-3 text-left text-xs">Address</th>
                                <th class="px-4 py-3 text-left text-xs">Principal</th>
                                <th class="px-4 py-3 text-left text-xs">Rate</th>
                                <th class="px-4 py-3 text-left text-xs">Time</th>
                                <th class="px-4 py-3 text-left text-xs">Interest Amount</th>
                                <th class="px-4 py-3 text-left text-xs">Total Amount</th>
                                <th class="px-4 py-3 text-left text-xs">Status</th>
                                <th class="px-4 py-3 text-left text-xs">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-primary-100">
                            <tr>
                                <td class="px-2 py-3">
                                    <div class="flex items-center">
                                        <input type="checkbox" [id]="'select-' + customer.id" class="form-checkbox"
                                            [attr.aria-label]="'Select ' + customer.name">
                                    </div>
                                </td>
                                <td class="px-4 py-3 text-xs font-data text-text-primary">{{customer.id}}</td>
                                <td class="px-4 py-3">
                                    <div class="flex items-center">
                                        <div
                                            class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3">
                                            <span
                                                class="text-xs font-medium text-primary">{{customer.name.charAt(0)}}</span>
                                        </div>
                                        <div>
                                            <p class="text-xs font-medium text-text-primary">{{customer.name}}</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-4 py-3 text-xs text-text-primary">{{customer.address}}</td>
                                <td class="px-4 py-3 text-xs font-data text-text-primary">{{customer.principal |
                                    currency}}</td>
                                <td class="px-4 py-3 text-xs font-data text-text-primary">{{customer.interestRate}}%
                                </td>
                                <td class="px-4 py-3 text-xs font-data text-text-primary">{{customer.timePeriod}} Months
                                </td>
                                <td class="px-4 py-3 text-xs font-data text-text-primary">{{customer.interestAmount |
                                    currency}}</td>
                                <td class="px-4 py-3 text-xs font-data font-semibold text-success">
                                    {{customer.totalAmount | currency}}
                                </td>
                                <td class="px-4 py-3">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"
                                        [ngClass]="{
                                              'bg-success-100 text-success-800': customer.status === 'active',
                                              'bg-error-100 text-error-800': customer.status === 'inactive',
                                              'bg-warning-100 text-warning-800': customer.status === 'pending'
                                            }">
                                        {{customer.status | titlecase}}
                                    </span>
                                </td>
                                <td class="px-4 py-3">
                                    <div class="flex items-center gap-4">
                                        <button (click)="editCustomer(customer.id)" class="text-secondary action-btn"
                                            [title]="'Edit ' + customer.name"
                                            [attr.aria-label]="'Edit ' + customer.name">
                                            <i class="fas fa-edit" aria-hidden="true"></i>
                                            <span>Edit</span>
                                        </button>
                                        <button (click)="deleteCustomer(customer.id)" class="text-error action-btn"
                                            [title]="'Delete ' + customer.name"
                                            [attr.aria-label]="'Delete ' + customer.name">
                                            <i class="fas fa-trash" aria-hidden="true"></i>
                                            <span>Delete</span>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>
</div>